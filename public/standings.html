<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">YSBA Live</title>
    
    <!-- Cache Control -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- Basic Meta Tags -->
    <meta name="description" id="pageDescription" content="YSBA Live - Real-time York Simcoe Baseball Association standings and schedules">
    <meta name="keywords" content="YSBA, baseball, standings, live, schedules, york, simcoe">
    <meta name="author" content="YSBA Live">
    
    <!-- Web App Meta -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="YSBA Live">
    <meta name="theme-color" id="themeColor" content="#024220">
    <link rel="manifest" href="/manifest.json?v=321200">
    
    <!-- Default Icon -->
    <link rel="icon" type="image/svg+xml" href="/icons/icon.svg?v=245986">
    
    <!-- iOS App Icons -->
    <link rel="apple-touch-icon" href="/icons/ios/AppIcon@3x.png?v=321200">
    <link rel="apple-touch-icon" sizes="60x60" href="/icons/ios/AppIcon-20@3x.png?v=321200">
    <link rel="apple-touch-icon" sizes="76x76" href="/icons/ios/AppIcon~ipad.png?v=321200">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/ios/AppIcon@2x.png?v=321200">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/ios/AppIcon@2x~ipad.png?v=321200">
    <link rel="apple-touch-icon" sizes="167x167" href="/icons/ios/AppIcon-83.5@2x~ipad.png?v=321200">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/ios/AppIcon@3x.png?v=321200">
    
    <!-- Android Icons -->
    <link rel="icon" type="image/png" sizes="48x48" href="/icons/android/res/mipmap-mdpi/ic_launcher.png?v=321200">
    <link rel="icon" type="image/png" sizes="72x72" href="/icons/android/res/mipmap-hdpi/ic_launcher.png?v=321200">
    <link rel="icon" type="image/png" sizes="96x96" href="/icons/android/res/mipmap-xhdpi/ic_launcher.png?v=321200">
    <link rel="icon" type="image/png" sizes="144x144" href="/icons/android/res/mipmap-xxhdpi/ic_launcher.png?v=321200">
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/android/res/mipmap-xxxhdpi/ic_launcher.png?v=321200">
    <link rel="icon" type="image/png" sizes="512x512" href="/icons/android/play_store_512.png?v=321200">
    
    <!-- Fonts and Styles -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/css/styles.css?v=245986">
    
</head>
<body class="modern-body">
    <!-- Header -->
    <header class="modern-header" id="dynamicHeader">
        <div class="container">
            <div class="header-content">
                <!-- Main Header -->
                <div class="header-top">
                    <div class="brand-section">
                        <div class="brand-text">
                            <h1 class="brand-title">
                                <a href="/">
                                    <span class="title-icon">
                                        <svg width="109" viewBox="0 0 109 129" fill="none" xmlns="http://www.w3.org/2000/svg" style="
    width: 23px;
">
                                            <path d="M65.1088 23.881C64.3417 22.642 63.1144 21.7579 61.6963 21.4226C60.2782 21.0872 58.785 21.328 57.5442 22.0922C56.3034 22.8563 55.4163 24.0813 55.0775 25.4986C54.7387 26.9159 54.9758 28.4097 55.7369 29.6524C56.7096 31.2269 57.7467 32.7746 58.8483 34.2954C59.7065 35.4725 60.9965 36.2613 62.4355 36.4887C63.8744 36.7162 65.3448 36.3637 66.5242 35.5087C67.7036 34.6536 68.4959 33.3657 68.7272 31.9274C68.9585 30.4891 68.61 29.0178 67.7581 27.8361C66.8178 26.541 65.9347 25.2226 65.1088 23.881ZM50.089 74.6257C49.66 74.0442 49.1206 73.5529 48.5016 73.1798C47.8827 72.8068 47.1964 72.5593 46.4818 72.4515C45.7672 72.3437 45.0384 72.3778 44.337 72.5516C43.6356 72.7255 42.9752 73.0358 42.3938 73.4649C41.8123 73.894 41.321 74.4334 40.9479 75.0523C40.5749 75.6712 40.3274 76.3576 40.2196 77.0721C40.1118 77.7867 40.1459 78.5155 40.3197 79.2169C40.4936 79.9184 40.8039 80.5787 41.233 81.1602C42.168 82.423 43.0332 83.7289 43.85 85.0616C44.2283 85.6777 44.7241 86.2132 45.3094 86.6377C45.8946 87.0621 46.5577 87.3671 47.2608 87.5353C47.9639 87.7034 48.6932 87.7315 49.4071 87.6178C50.121 87.5041 50.8056 87.2509 51.4217 86.8726C52.0377 86.4944 52.5733 85.9985 52.9977 85.4133C53.4221 84.828 53.7271 84.165 53.8953 83.4619C54.0635 82.7588 54.0915 82.0294 53.9778 81.3155C53.8641 80.6016 53.6109 79.917 53.2327 79.301C52.2547 77.7102 51.2068 76.1465 50.089 74.6257ZM29.6903 55.7583C29.0742 55.3807 28.3898 55.1282 27.6762 55.0152C26.9625 54.9021 26.2336 54.9308 25.531 55.0994C24.8284 55.2681 24.1659 55.5735 23.5813 55.9982C22.9967 56.4229 22.5016 56.9586 22.124 57.5746C21.7465 58.1907 21.494 58.8751 21.3809 59.5888C21.2679 60.3024 21.2965 61.0314 21.4652 61.734C21.6338 62.4366 21.9392 63.0991 22.3639 63.6836C22.7886 64.2682 23.3243 64.7634 23.9404 65.1409C25.2731 65.9577 26.5807 66.8354 27.8632 67.7741C28.4474 68.2023 29.1103 68.511 29.814 68.6825C30.5177 68.854 31.2483 68.885 31.964 68.7736C32.6797 68.6622 33.3663 68.4107 33.9846 68.0334C34.6029 67.6561 35.1407 67.1606 35.567 66.5751C35.9934 65.9896 36.3001 65.3257 36.4694 64.6214C36.6387 63.9172 36.6673 63.1865 36.5537 62.4712C36.4401 61.7558 36.1864 61.07 35.8071 60.4529C35.4279 59.8358 34.9307 59.2996 34.3438 58.875C32.8231 57.7679 31.272 56.729 29.6903 55.7583ZM85.0511 43.8338C83.713 43.0116 82.4 42.1321 81.1121 41.1952C79.9318 40.3402 78.4606 39.9882 77.0211 40.2164C75.5816 40.4446 74.2914 41.2343 73.4334 42.4125C72.5754 43.5906 72.2197 45.061 72.4442 46.501C72.6688 47.9411 73.4553 49.2333 74.6313 50.0942C76.1521 51.2012 77.7051 52.242 79.2904 53.2164C79.9064 53.5947 80.591 53.8479 81.3049 53.9616C82.0188 54.0753 82.7482 54.0472 83.4513 53.8791C84.1543 53.7109 84.8174 53.4059 85.4027 52.9815C85.9879 52.5571 86.4838 52.0215 86.862 51.4055C87.2403 50.7894 87.4935 50.1049 87.6072 49.3909C87.7209 48.677 87.6929 47.9477 87.5247 47.2446C87.3565 46.5415 87.0515 45.8784 86.6271 45.2932C86.2027 44.708 85.6672 44.2121 85.0511 43.8338ZM93.0095 15.9601C85.3903 8.33991 75.6826 3.15024 65.1139 1.04743C54.5452 -1.05538 43.5902 0.0231118 33.6345 4.14652C23.6787 8.26993 15.1693 15.253 9.18242 24.2127C3.19551 33.1725 0 43.7063 0 54.4822C0 65.2581 3.19551 75.7919 9.18242 84.7516C15.1693 93.7114 23.6787 100.694 33.6345 104.818C43.5902 108.941 54.5452 110.02 65.1139 107.917C75.6826 105.814 85.3903 100.624 93.0095 93.0043C103.209 82.7787 108.938 68.9252 108.938 54.4822C108.938 40.0392 103.209 26.1857 93.0095 15.9601ZM86.0021 85.9966C79.2827 92.7342 70.5677 97.1224 61.1537 98.5085C60.6791 97.6236 59.9648 96.8904 59.0926 96.3929C58.2204 95.8955 57.2256 95.654 56.2224 95.696C55.2192 95.7381 54.2482 96.0621 53.4207 96.6308C52.5932 97.1995 51.9428 97.99 51.544 98.9115C40.7744 98.2285 30.623 93.6434 22.9907 86.0145C15.3584 78.3857 10.7686 68.2365 10.0807 57.4672C10.996 57.0618 11.7797 56.4084 12.3431 55.5809C12.9065 54.7535 13.2272 53.7849 13.2689 52.7847C13.3105 51.7844 13.0716 50.7925 12.579 49.921C12.0864 49.0495 11.3598 48.3332 10.4814 47.8531C11.8571 38.4365 16.2325 29.7146 22.9582 22.982C29.6839 16.2494 38.4014 11.865 47.8165 10.4798C48.295 11.3075 48.9816 11.9958 49.8081 12.4764C50.6347 12.9569 51.5725 13.2131 52.5286 13.2194C52.9537 13.2186 53.3773 13.1699 53.7915 13.0743C54.5835 12.8798 55.3212 12.5085 55.9494 11.9884C56.5775 11.4682 57.0797 10.8126 57.4184 10.0707C68.1999 10.7428 78.3648 15.3293 86.0028 22.9682C93.6408 30.6072 98.226 40.7727 98.8967 51.5543C97.9857 51.9589 97.2059 52.6098 96.645 53.4338C96.0842 54.2578 95.7646 55.2221 95.7224 56.218C95.6801 57.2139 95.9169 58.2017 96.4059 59.0703C96.895 59.9388 97.6169 60.6535 98.4903 61.1338C97.1074 70.548 92.7283 79.2662 86.0021 85.9966Z" fill="#ffffff"></path>
                                            </svg>
                                    </span> 
                                     YSBA<span class="fw-light">LIVE</span> 
                                     <span class="fw-light">|</span> 
                                     <span>STANDINGS</span>
                                </a>
                            </h1>
                            <!-- Division/Tier Selector Dropdown -->
                            <div class="dropdown">
                                <button class="brand-subtitle-btn" 
                                        type="button" 
                                        data-bs-toggle="dropdown" 
                                        aria-expanded="false"
                                        id="divisionTierSelector">
                                    <span class="dropdown-button-text" id="currentDivisionTier">Loading...</span>
                                    <i class="bi bi-chevron-down"></i>
                                </button>
                                <ul class="dropdown-menu" id="divisionTierMenu">
                                    <!-- Populated by JavaScript - this is hidden on larger screens in favor of mega menu -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Status Bar -->
                <div class="status-bar">
                    <div class="status-item">
                        <i class="bi bi-lightning-fill"></i>
                        <span>Last synced: <span id="lastUpdated">Loading...</span></span>
                    </div>
                    
                    <div class="status-actions">
                        <!-- Division Filter - Only shown for divisions that support it -->
                        <div class="dropdown" id="divisionFilterContainer" style="display: none;">
                            <button id="divisionBtn" class="btn-modern btn-secondary btn-compact dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="bi bi-sliders2-vertical"></i>
                                <span class="d-none d-lg-inline">Division</span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end" id="divisionFilterMenu">
                                <!-- Populated by JavaScript -->
                            </ul>
                        </div>
                        <a href="#" id="notificationsBtn" class="status-action-link" data-bs-toggle="modal" data-bs-target="#notificationsModal">
                            <i class="bi bi-bell"></i>
                            <span class="d-none d-lg-inline">Notifications</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Loading State -->
            <div id="loadingState" class="loading-card">
                <div class="loading-content">
                    <div class="loading-spinner"></div>
                    <h3>Loading Standings</h3>
                    <p>Fetching the latest data from YSBA...</p>
                </div>
            </div>

            <!-- Error State -->
            <div id="errorAlert" class="error-card">
                <div class="error-content">
                    <i class="bi bi-exclamation-triangle"></i>
                    <div>
                        <h4>Unable to Load Standings</h4>
                        <p id="errorMessage">Something went wrong. Please try refreshing the page.</p>
                    </div>
                </div>
            </div>

            <!-- Standings Table -->
            <div id="standingsContainer" class="standings-container">
                <div class="standings-card">
                    <div class="table-container">
                        <table class="standings-table">
                            <thead>
                                <tr>
                                    <th class="pos-col">Pos</th>
                                    <th class="team-col">Team</th>
                                    <th class="stat-col">GP</th>
                                    <th class="stat-col">W</th>
                                    <th class="stat-col">L</th>
                                    <th class="stat-col">T</th>
                                    <th class="stat-col">PTS</th>
                                    <th class="stat-col" title="Runs For" data-bs-toggle="tooltip">RF</th>
                                    <th class="stat-col" title="Runs Against" data-bs-toggle="tooltip">RA</th>
                                    <th class="stat-col">PCT</th>
                                </tr>
                            </thead>
                            <tbody id="standingsTableBody">
                                <!-- Table rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                        
                        <!-- Swipe Indicator -->
                        <div class="swipe-indicator">
                            <div class="swipe-content">
                                <i class="bi bi-arrow-left"></i>
                                <span>Swipe to see more</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="modern-footer">
        <div class="container">
            <div class="footer-content">
                <p id="footerTitle">York Simcoe Baseball Association</p>
                <p class="footer-note">
                    <i class="bi bi-check-circle"></i>&nbsp;&nbsp; 
                    Last YSBA Standings Update: <span id="lastYsbaUpdate">Loading...</span>
                </p>
            </div>
        </div>
    </footer>

    <!-- Team Schedule Modal -->
    <div class="modal fade" id="scheduleModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-md">
            <div class="modal-content modern-modal">
                <div class="modal-header">
                    <div class="modal-title-section">
                        <h5 class="modal-title" id="scheduleModalTitle">Team Schedule</h5>
                        <div class="team-record" id="teamRecord"></div>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="scheduleLoadingState" class="schedule-loading">
                        <div class="loading-spinner-small"></div>
                        <p>Loading schedule...</p>
                    </div>
                    
                    <div id="scheduleErrorState" class="schedule-error">
                        <i class="bi bi-exclamation-triangle"></i>
                        <p>Unable to load schedule. Please try again.</p>
                    </div>
                    
                    <div id="scheduleContent" class="schedule-content">
                        <div class="schedule-tabs">
                            <!-- Tabs will be dynamically created by JavaScript -->
                        </div>
                        
                        <div class="schedule-games">
                            <!-- Games will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications Modal -->
    <div class="modal fade" id="notificationsModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content modern-modal">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-bell"></i>
                        Standings Change Alerts
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p class="text-muted mb-4" id="notificationDescription">
                        Get alerts when standings change!
                    </p>
                    
                    <div id="subscriptionAlert" class="alert" style="display: none;"></div>
                    
                    <form id="subscriptionForm">
                        <div class="mb-3">
                            <label for="subscriberEmail" class="form-label">Email Address</label>
                            <input type="email" class="form-control" id="subscriberEmail" required>
                        </div>
                        
                        <div class="mb-4" style="display: none;">
                            <label for="subscriberName" class="form-label">Your Name (optional)</label>
                            <input type="text" class="form-control" id="subscriberName">
                        </div>
                        
                        <!-- Division Preferences Container -->
                        <div class="mb-4" id="divisionPreferences">
                            <!-- Checkboxes will be loaded dynamically -->
                        </div>
                        
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary" style="padding-top: 15px; padding-bottom: 15px;">
                                <i class="bi bi-envelope-plus"></i>
                                &nbsp;&nbsp;Subscribe to Notifications
                            </button>
                        </div>
                    </form>
                    
                    <div class="text-center mt-4">
                        <small class="text-muted">
                            <i class="bi bi-info-circle"></i>
                            You can unsubscribe at any time from the email.
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/simplyCountdown.umd.js"></script>
    <script src="/js/dev-utils.js?v=245986"></script>
    <script src="/js/multi-division-app.js?v=421481"></script>
</body>
</html> 